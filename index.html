<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>For Advika - A 3D Love Journey üíï</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Georgia', 'Times New Roman', serif;
            overflow-x: hidden;
            background: #000;
        }

        #canvas-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
        }

        /* UI Overlay */
        .ui-overlay {
            position: fixed;
            z-index: 100;
            pointer-events: none;
        }

        .ui-overlay > * {
            pointer-events: auto;
        }

        /* Audio Toggle */
        .audio-toggle {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
            background: rgba(255, 105, 180, 0.3);
            border: 2px solid rgba(255, 255, 255, 0.5);
            border-radius: 50%;
            width: 50px;
            height: 50px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }

        .audio-toggle:hover {
            background: rgba(255, 105, 180, 0.5);
            transform: scale(1.1);
        }

        /* Mode Buttons */
        .mode-buttons {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 20px;
            z-index: 1000;
        }

        .mode-btn {
            padding: 15px 25px;
            background: rgba(255, 105, 180, 0.3);
            border: 2px solid rgba(255, 255, 255, 0.5);
            border-radius: 30px;
            color: white;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
            font-family: 'Georgia', serif;
        }

        .mode-btn:hover {
            background: rgba(255, 105, 180, 0.5);
            transform: translateY(-3px);
        }

        .mode-btn.active {
            background: rgba(255, 105, 180, 0.7);
            border-color: #ff6b6b;
        }

        /* Progress Indicator */
        .progress-container {
            position: fixed;
            right: 30px;
            top: 50%;
            transform: translateY(-50%);
            z-index: 1000;
        }

        .progress-dot {
            width: 12px;
            height: 12px;
            background: rgba(255, 255, 255, 0.3);
            border: 2px solid rgba(255, 255, 255, 0.5);
            border-radius: 50%;
            margin: 15px 0;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .progress-dot.active {
            background: #ff6b6b;
            border-color: #ff6b6b;
            box-shadow: 0 0 15px rgba(255, 107, 107, 0.8);
        }

        .progress-dot:hover {
            transform: scale(1.3);
        }

        /* Scroll Sections */
        .scroll-section {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            z-index: 10;
            padding: 40px;
        }

        .text-container {
            max-width: 800px;
            text-align: center;
            opacity: 0;
            transform: translateY(50px);
            transition: all 1s ease;
        }

        .text-container.visible {
            opacity: 1;
            transform: translateY(0);
        }

        .main-title {
            font-size: 4rem;
            color: #fff;
            text-shadow: 0 0 30px rgba(255, 105, 180, 0.8), 0 0 60px rgba(255, 105, 180, 0.4);
            margin-bottom: 20px;
            animation: titlePulse 2s ease-in-out infinite;
        }

        @keyframes titlePulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .section-text {
            font-size: 1.8rem;
            color: rgba(255, 255, 255, 0.9);
            line-height: 2;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);
        }

        .section-text.highlight {
            color: #ffb6c1;
            font-size: 2rem;
        }

        .section-text.emphasis {
            font-size: 2.5rem;
            color: #ff6b6b;
            font-style: italic;
        }

        /* Memory Orbs */
        .memory-orb {
            position: fixed;
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: radial-gradient(circle at 30% 30%, rgba(255, 182, 193, 0.8), rgba(255, 105, 180, 0.4));
            border: 2px solid rgba(255, 255, 255, 0.5);
            cursor: pointer;
            z-index: 100;
            transition: all 0.3s ease;
            animation: orbFloat 3s ease-in-out infinite;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
        }

        .memory-orb:hover {
            transform: scale(1.2);
            box-shadow: 0 0 30px rgba(255, 105, 180, 0.8);
        }

        @keyframes orbFloat {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        /* Orb Popup */
        .orb-popup {
            position: fixed;
            background: rgba(0, 0, 0, 0.9);
            border: 2px solid #ff6b6b;
            border-radius: 20px;
            padding: 30px;
            max-width: 400px;
            z-index: 200;
            opacity: 0;
            transform: scale(0.5);
            transition: all 0.5s ease;
            pointer-events: none;
        }

        .orb-popup.visible {
            opacity: 1;
            transform: scale(1);
            pointer-events: auto;
        }

        .orb-popup .quote {
            color: #fff;
            font-size: 1.2rem;
            font-style: italic;
            text-align: center;
            line-height: 1.8;
        }

        .orb-popup .close-btn {
            position: absolute;
            top: 10px;
            right: 15px;
            background: none;
            border: none;
            color: #ff6b6b;
            font-size: 1.5rem;
            cursor: pointer;
        }

        /* Eye Following Cursor */
        .eye-cursor {
            position: fixed;
            width: 100px;
            height: 60px;
            background: radial-gradient(ellipse at center, #fff 0%, #ffb6c1 50%, #e91e63 100%);
            border-radius: 50%;
            pointer-events: none;
            z-index: 50;
            opacity: 0;
            transition: opacity 0.3s ease;
            overflow: hidden;
        }

        .eye-cursor::before {
            content: '';
            position: absolute;
            width: 30px;
            height: 30px;
            background: #4a2c2c;
            border-radius: 50%;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            animation: pupilMove 0.1s ease;
        }

        .eye-cursor.active {
            opacity: 0.8;
        }

        /* Floating Kiss Marks */
        .kiss-mark {
            position: fixed;
            font-size: 2rem;
            pointer-events: none;
            z-index: 60;
            animation: kissFloat 3s ease forwards;
        }

        @keyframes kissFloat {
            0% { transform: translateY(0) scale(0); opacity: 1; }
            100% { transform: translateY(-200px) scale(1); opacity: 0; }
        }

        /* Scroll Indicator */
        .scroll-indicator {
            position: fixed;
            bottom: 120px;
            left: 50%;
            transform: translateX(-50%);
            color: rgba(255, 255, 255, 0.7);
            font-size: 1rem;
            animation: bounce 2s ease-in-out infinite;
            z-index: 1000;
        }

        @keyframes bounce {
            0%, 100% { transform: translateX(-50%) translateY(0); }
            50% { transform: translateX(-50%) translateY(-10px); }
        }

        /* Loading Screen */
        .loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #1a1a2e, #16213e, #0f3460);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 10000;
            transition: opacity 1s ease;
        }

        .loading-screen.hidden {
            opacity: 0;
            pointer-events: none;
        }

        .loading-heart {
            font-size: 5rem;
            animation: heartbeat 1s ease-in-out infinite;
        }

        @keyframes heartbeat {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .loading-text {
            color: #fff;
            font-size: 1.5rem;
            margin-top: 20px;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .main-title {
                font-size: 2.5rem;
            }

            .section-text {
                font-size: 1.3rem;
            }

            .section-text.emphasis {
                font-size: 1.8rem;
            }

            .mode-buttons {
                flex-wrap: wrap;
                width: 90%;
                justify-content: center;
            }

            .mode-btn {
                padding: 12px 20px;
                font-size: 0.9rem;
            }

            .progress-container {
                right: 15px;
            }

            .progress-dot {
                width: 10px;
                height: 10px;
            }
        }
    </style>
</head>
<body>
    <!-- Loading Screen -->
    <div class="loading-screen" id="loadingScreen">
        <div class="loading-heart">üíï</div>
        <p class="loading-text">Loading our love story...</p>
    </div>

    <!-- Three.js Container -->
    <div id="canvas-container"></div>

    <!-- UI Elements -->
    <div class="audio-toggle" id="audioToggle">üéµ</div>

    <div class="progress-container" id="progressContainer">
        <div class="progress-dot active" data-section="0"></div>
        <div class="progress-dot" data-section="1"></div>
        <div class="progress-dot" data-section="2"></div>
        <div class="progress-dot" data-section="3"></div>
        <div class="progress-dot" data-section="4"></div>
        <div class="progress-dot" data-section="5"></div>
        <div class="progress-dot" data-section="6"></div>
        <div class="progress-dot" data-section="7"></div>
    </div>

    <div class="mode-buttons">
        <button class="mode-btn" id="btnEye">üëÅÔ∏è Eye Mode</button>
        <button class="mode-btn" id="btnDrunk">üç∏ Drunk</button>
        <button class="mode-btn" id="btnKiss">üíã Kiss</button>
    </div>

    <div class="scroll-indicator" id="scrollIndicator">
        ‚Üì Scroll to begin ‚Üì
    </div>

    <!-- Eye Cursor (for Eye Mode) -->
    <div class="eye-cursor" id="eyeCursor"></div>

    <!-- Memory Orbs (positioned randomly) -->
    <div class="memory-orb" style="top: 30%; left: 10%;" data-quote="i love your eyes, your piercings, your hair...">üíï</div>
    <div class="memory-orb" style="top: 50%; right: 15%;" data-quote="i would love to kiss you, anytime and everytime i get the chance">üíã</div>
    <div class="memory-orb" style="top: 70%; left: 20%;" data-quote="i loveeeeee youuuuuuu and i want to keep loving you">üíó</div>
    <div class="memory-orb" style="top: 40%; right: 10%;" data-quote="i love the little side eyes you give, the cute ones you don't even notice you do">üëÄ</div>

    <!-- Orb Popup -->
    <div class="orb-popup" id="orbPopup">
        <button class="close-btn" id="closeOrb">&times;</button>
        <p class="quote" id="orbQuote"></p>
    </div>

    <!-- Scroll Sections -->
    <div class="scroll-section" data-section="0">
        <div class="text-container visible">
            <h1 class="main-title">For Advika üíï</h1>
            <p class="section-text">A journey through my heart</p>
            <p class="section-text highlight">Scroll to begin</p>
        </div>
    </div>

    <div class="scroll-section" data-section="1">
        <div class="text-container">
            <p class="section-text">
                i love your eyes, your piercings, your hair,<br>
                your <span class="highlight">"poopy" brown eyes</span><br>
                <span style="font-style: italic; opacity: 0.7;">(jokes aside)</span>
            </p>
            <p class="section-text" style="margin-top: 20px;">
                i love those eyes.<br>
                i love to look at them.<br>
                and your face.
            </p>
        </div>
    </div>

    <div class="scroll-section" data-section="2">
        <div class="text-container">
            <p class="section-text emphasis">
                i would love to kiss you,<br>
                anytime<br>
                and everytime<br>
                i get the chance.
            </p>
        </div>
    </div>

    <div class="scroll-section" data-section="3">
        <div class="text-container">
            <p class="section-text emphasis">
                i loveeeeee youuuuuuu üíï<br>
                and i want to keep loving you.
            </p>
        </div>
    </div>

    <div class="scroll-section" data-section="4">
        <div class="text-container">
            <p class="section-text">
                i love the little side eyes you give,<br>
                the cute ones you don't even notice you do.
            </p>
            <p class="section-text" style="margin-top: 20px;">
                the way you look when you're being silly,<br>
                when you're not trying at all,<br>
                and somehow that's when you're the most <span class="highlight">you</span>.
            </p>
        </div>
    </div>

    <div class="scroll-section" data-section="5">
        <div class="text-container">
            <p class="section-text">
                i love your <span class="highlight">drunk mode</span>,<br>
                the softness, the chaos, the honesty,<br>
                the way you become extra you,<br>
                like your heart forgets how to hold back.
            </p>
        </div>
    </div>

    <div class="scroll-section" data-section="6">
        <div class="text-container">
            <p class="section-text">
                i love your silliness,<br>
                your random moments,<br>
                the way you make ordinary seconds feel <span class="highlight">lighter</span>.
            </p>
        </div>
    </div>

    <div class="scroll-section" data-section="7">
        <div class="text-container">
            <p class="section-text">
                you're on my mind all the time,<br>
                in the quiet moments,<br>
                in the busy ones,<br>
                24/7, without effort, without trying.
            </p>
            <p class="section-text emphasis" style="margin-top: 40px;">
                yours,<br>
                yusuf
            </p>
            <p class="section-text" style="color: #ff6b6b; margin-top: 20px;">
                and only yours ‚ù§Ô∏è
            </p>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    <script>
        // Initialize Three.js Scene
        const container = document.getElementById('canvas-container');
        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });

        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
        container.appendChild(renderer.domElement);

        // Camera position
        camera.position.z = 5;

        // Color palette (rose gold, warm brown, soft pink)
        const colors = {
            roseGold: 0xb76e79,
            warmBrown: 0x8b6914,
            softPink: 0xffb6c1,
            deepPink: 0xff1493,
            cream: 0xfffdd0,
            chocolate: 0x7b3f00
        };

        // Heart Particles
        const heartGeometry = new THREE.BufferGeometry();
        const heartCount = 500;
        const positions = new Float32Array(heartCount * 3);
        const velocities = [];

        for (let i = 0; i < heartCount; i++) {
            positions[i * 3] = (Math.random() - 0.5) * 30;
            positions[i * 3 + 1] = (Math.random() - 0.5) * 30;
            positions[i * 3 + 2] = (Math.random() - 0.5) * 20;
            velocities.push({
                x: (Math.random() - 0.5) * 0.02,
                y: (Math.random() - 0.5) * 0.02,
                z: (Math.random() - 0.5) * 0.02
            });
        }

        heartGeometry.setAttribute('position', new THREE.BufferAttribute(positions, 3));

        // Custom heart shape shader
        const heartMaterial = new THREE.PointsMaterial({
            color: colors.deepPink,
            size: 0.1,
            transparent: true,
            opacity: 0.8
        });

        const hearts = new THREE.Points(heartGeometry, heartMaterial);
        scene.add(hearts);

        // Create individual heart meshes
        const heartMeshes = [];
        const heartShape = new THREE.Shape();

        // Draw heart shape
        heartShape.moveTo(0, 0.2);
        heartShape.bezierCurveTo(0, 0.2, -0.2, 0.4, -0.4, 0.2);
        heartShape.bezierCurveTo(-0.6, 0, -0.4, -0.2, 0, -0.4);
        heartShape.bezierCurveTo(0.4, -0.2, 0.6, 0, 0.4, 0.2);
        heartShape.bezierCurveTo(0.2, 0.4, 0, 0.2, 0, 0.2);

        const heartExtrudeSettings = { depth: 0.05, bevelEnabled: true, bevelSegments: 2, steps: 2, bevelSize: 0.02, bevelThickness: 0.02 };
        const heartMeshGeometry = new THREE.ExtrudeGeometry(heartShape, heartExtrudeSettings);
        heartMeshGeometry.center();

        for (let i = 0; i < 100; i++) {
            const heartMaterial = new THREE.MeshPhongMaterial({
                color: new THREE.Color().setHSL(Math.random() * 0.1 + 0.95, 0.8, 0.7),
                transparent: true,
                opacity: 0.8,
                shininess: 100
            });

            const heart = new THREE.Mesh(heartMeshGeometry, heartMaterial);
            heart.position.set(
                (Math.random() - 0.5) * 20,
                (Math.random() - 0.5) * 20,
                (Math.random() - 0.5) * 10 - 5
            );
            heart.rotation.z = Math.random() * Math.PI;
            heart.scale.setScalar(0.1 + Math.random() * 0.2);
            
            heart.userData = {
                velocity: new THREE.Vector3(
                    (Math.random() - 0.5) * 0.01,
                    (Math.random() - 0.5) * 0.01,
                    0
                ),
                rotationSpeed: (Math.random() - 0.5) * 0.02
            };

            heartMeshes.push(heart);
            scene.add(heart);
        }

        // Piercings (floating rings)
        const piercingGeometry = new THREE.TorusGeometry(0.1, 0.02, 8, 16);
        const piercingMaterial = new THREE.MeshPhongMaterial({
            color: colors.roseGold,
            shininess: 200,
            metalness: 0.8
        });

        const piercings = [];
        for (let i = 0; i < 15; i++) {
            const piercing = new THREE.Mesh(piercingGeometry, piercingMaterial.clone());
            piercing.position.set(
                (Math.random() - 0.5) * 15,
                (Math.random() - 0.5) * 15,
                (Math.random() - 0.5) * 10
            );
            piercing.rotation.x = Math.random() * Math.PI;
            piercing.rotation.y = Math.random() * Math.PI;
            
            piercing.userData = {
                rotationSpeed: {
                    x: (Math.random() - 0.5) * 0.02,
                    y: (Math.random() - 0.5) * 0.02,
                    z: (Math.random() - 0.5) * 0.02
                },
                floatSpeed: Math.random() * 2 + 1,
                floatOffset: Math.random() * Math.PI * 2
            };

            piercings.push(piercing);
            scene.add(piercing);
        }

        // Hair/Ribbon particles
        const ribbonGeometry = new THREE.PlaneGeometry(0.3, 0.8, 1, 4);
        const ribbonMaterial = new THREE.MeshPhongMaterial({
            color: colors.chocolate,
            side: THREE.DoubleSide,
            transparent: true,
            opacity: 0.7,
            shininess: 50
        });

        const ribbons = [];
        for (let i = 0; i < 50; i++) {
            const ribbon = new THREE.Mesh(ribbonGeometry, ribbonMaterial.clone());
            ribbon.position.set(
                (Math.random() - 0.5) * 20,
                (Math.random() - 0.5) * 20,
                (Math.random() - 0.5) * 15
            );
            ribbon.rotation.z = Math.random() * Math.PI;
            
            ribbon.userData = {
                waveSpeed: Math.random() * 2 + 1,
                waveAmplitude: Math.random() * 0.5 + 0.2,
                phase: Math.random() * Math.PI * 2
            };

            ribbons.push(ribbon);
            scene.add(ribbon);
        }

        // 3D Eye (for eye mode)
        const eyeGroup = new THREE.Group();
        
        // Eye white
        const eyeWhiteGeometry = new THREE.SphereGeometry(0.8, 32, 32);
        const eyeWhiteMaterial = new THREE.MeshPhongMaterial({
            color: 0xffffff,
            shininess: 100
        });
        const eyeWhite = new THREE.Mesh(eyeWhiteGeometry, eyeWhiteMaterial);
        eyeGroup.add(eyeWhite);

        // Iris
        const irisGeometry = new THREE.CircleGeometry(0.35, 32);
        const irisMaterial = new THREE.MeshPhongMaterial({
            color: 0x4a2c2c,
            shininess: 80
        });
        const iris = new THREE.Mesh(irisGeometry, irisMaterial);
        iris.position.z = 0.75;
        eyeGroup.add(iris);

        // Pupil
        const pupilGeometry = new THREE.CircleGeometry(0.15, 32);
        const pupilMaterial = new THREE.MeshBasicMaterial({ color: 0x000000 });
        const pupil = new THREE.Mesh(pupilGeometry, pupilMaterial);
        pupil.position.z = 0.78;
        eyeGroup.add(pupil);

        // Eye highlight
        const highlightGeometry = new THREE.CircleGeometry(0.05, 16);
        const highlightMaterial = new THREE.MeshBasicMaterial({ color: 0xffffff });
        const highlight = new THREE.Mesh(highlightGeometry, highlightMaterial);
        highlight.position.set(0.15, 0.15, 0.8);
        eyeGroup.add(highlight);

        eyeGroup.position.set(0, 0, 3);
        eyeGroup.scale.setScalar(0);
        scene.add(eyeGroup);

        // Lighting
        const ambientLight = new THREE.AmbientLight(0xffffff, 0.5);
        scene.add(ambientLight);

        const pointLight = new THREE.PointLight(colors.deepPink, 1, 100);
        pointLight.position.set(5, 5, 5);
        scene.add(pointLight);

        const pointLight2 = new THREE.PointLight(colors.roseGold, 0.8, 100);
        pointLight2.position.set(-5, -5, 5);
        scene.add(pointLight2);

        // Mouse tracking
        let mouseX = 0;
        let mouseY = 0;
        let targetX = 0;
        let targetY = 0;

        document.addEventListener('mousemove', (event) => {
            mouseX = (event.clientX / window.innerWidth) * 2 - 1;
            mouseY = -(event.clientY / window.innerHeight) * 2 + 1;

            // Update camera/particle parallax
            targetX = mouseX * 0.5;
            targetY = mouseY * 0.5;
        });

        // Gyroscope for mobile
        let gyroData = { x: 0, y: 0 };
        if (window.DeviceOrientationEvent) {
            window.addEventListener('deviceorientation', (event) => {
                gyroData.x = event.gamma ? event.gamma / 45 : 0;
                gyroData.y = event.beta ? (event.beta - 45) / 45 : 0;
            });
        }

        // Mode states
        let eyeMode = false;
        let drunkMode = false;
        let kissMode = false;

        // Mode buttons
        document.getElementById('btnEye').addEventListener('click', () => {
            eyeMode = !eyeMode;
            document.getElementById('btnEye').classList.toggle('active', eyeMode);
            
            if (eyeMode) {
                gsap.to(eyeGroup.scale, { x: 1, y: 1, z: 1, duration: 0.5 });
            } else {
                gsap.to(eyeGroup.scale, { x: 0, y: 0, z: 0, duration: 0.5 });
            }
        });

        document.getElementById('btnDrunk').addEventListener('click', () => {
            drunkMode = !drunkMode;
            document.getElementById('btnDrunk').classList.toggle('active', drunkMode);

            if (drunkMode) {
                // Wavy camera effect
                gsap.to(camera.position, {
                    x: () => (Math.random() - 0.5) * 0.3,
                    y: () => (Math.random() - 0.5) * 0.3,
                    duration: 0.1,
                    repeat: -1,
                    yoyo: true
                });
                
                // Increase particle speed and chaos
                gsap.to(heartMaterial, { size: 0.2, duration: 0.5 });
                ribbons.forEach(ribbon => {
                    ribbon.userData.waveAmplitude *= 2;
                });
            } else {
                // Reset camera
                gsap.killTweensOf(camera.position);
                gsap.to(camera.position, { x: 0, y: 0, duration: 0.5 });
                
                // Reset particle effects
                gsap.to(heartMaterial, { size: 0.1, duration: 0.5 });
                ribbons.forEach(ribbon => {
                    ribbon.userData.waveAmplitude /= 2;
                });
            }
        });

        document.getElementById('btnKiss').addEventListener('click', () => {
            kissMode = !kissMode;
            document.getElementById('btnKiss').classList.toggle('active', kissMode);

            if (kissMode) {
                // Spawn kiss marks
                createKissMark();
            }
        });

        function createKissMark() {
            const kiss = document.createElement('div');
            kiss.className = 'kiss-mark';
            kiss.textContent = 'üíã';
            kiss.style.left = Math.random() * window.innerWidth + 'px';
            kiss.style.top = Math.random() * window.innerHeight + 'px';
            document.body.appendChild(kiss);

            setTimeout(() => kiss.remove(), 3000);

            if (kissMode) {
                setTimeout(createKissMark, 1000);
            }
        }

        // Memory Orbs
        const orbs = document.querySelectorAll('.memory-orb');
        const orbPopup = document.getElementById('orbPopup');
        const orbQuote = document.getElementById('orbQuote');
        const closeOrb = document.getElementById('closeOrb');

        orbs.forEach(orb => {
            orb.addEventListener('click', () => {
                orbQuote.textContent = orb.dataset.quote;
                orbPopup.style.left = (orb.offsetLeft + 100) + 'px';
                orbPopup.style.top = (orb.offsetTop) + 'px';
                orbPopup.classList.add('visible');
            });
        });

        closeOrb.addEventListener('click', () => {
            orbPopup.classList.remove('visible');
        });

        // Progress dots
        const progressDots = document.querySelectorAll('.progress-dot');
        progressDots.forEach(dot => {
            dot.addEventListener('click', () => {
                const sectionIndex = parseInt(dot.dataset.section);
                const sections = document.querySelectorAll('.scroll-section');
                sections[sectionIndex].scrollIntoView({ behavior: 'smooth' });
            });
        });

        // GSAP ScrollTrigger
        gsap.registerPlugin(ScrollTrigger);

        // Animate text sections
        document.querySelectorAll('.scroll-section').forEach((section, index) => {
            const textContainer = section.querySelector('.text-container');
            
            ScrollTrigger.create({
                trigger: section,
                start: 'top 80%',
                end: 'bottom 20%',
                onEnter: () => {
                    textContainer.classList.add('visible');
                    document.querySelectorAll('.progress-dot')[index]?.classList.add('active');
                },
                onLeaveBack: () => {
                    textContainer.classList.remove('visible');
                    document.querySelectorAll('.progress-dot')[index]?.classList.remove('active');
                }
            });
        });

        // Eye following cursor
        const eyeCursor = document.getElementById('eyeCursor');

        document.addEventListener('mousemove', () => {
            if (eyeMode) {
                eyeCursor.style.left = (event.clientX - 50) + 'px';
                eyeCursor.style.top = (event.clientY - 30) + 'px';
            }
        });

        // Audio toggle
        let audioPlaying = false;
        const audioToggle = document.getElementById('audioToggle');
        
        // Create ambient sound
        const audioContext = new (window.AudioContext || window.webkitAudioContext)();
        let oscillator = null;
        let gainNode = null;

        audioToggle.addEventListener('click', () => {
            if (audioPlaying) {
                if (oscillator) {
                    oscillator.stop();
                    oscillator = null;
                }
                audioPlaying = false;
                audioToggle.textContent = 'üéµ';
            } else {
                oscillator = audioContext.createOscillator();
                gainNode = audioContext.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);
                
                oscillator.type = 'sine';
                oscillator.frequency.setValueAtTime(220, audioContext.currentTime);
                gainNode.gain.setValueAtTime(0.05, audioContext.currentTime);
                
                oscillator.start();
                audioPlaying = true;
                audioToggle.textContent = 'üîä';
            }
        });

        // Scroll indicator hide on scroll
        const scrollIndicator = document.getElementById('scrollIndicator');
        window.addEventListener('scroll', () => {
            if (window.scrollY > 100) {
                scrollIndicator.style.opacity = '0';
            } else {
                scrollIndicator.style.opacity = '1';
            }
        });

        // Animation loop
        const clock = new THREE.Clock();

        function animate() {
            requestAnimationFrame(animate);
            
            const time = clock.getElapsedTime();

            // Animate heart particles
            const positions = hearts.geometry.attributes.position.array;
            for (let i = 0; i < heartCount; i++) {
                positions[i * 3] += velocities[i].x;
                positions[i * 3 + 1] += velocities[i].y;
                positions[i * 3 + 2] += velocities[i].z;

                // Wrap around
                if (positions[i * 3] > 15) positions[i * 3] = -15;
                if (positions[i * 3] < -15) positions[i * 3] = 15;
                if (positions[i * 3 + 1] > 15) positions[i * 3 + 1] = -15;
                if (positions[i * 3 + 1] < -15) positions[i * 3 + 1] = 15;
            }
            hearts.geometry.attributes.position.needsUpdate = true;
            hearts.rotation.y += 0.001;

            // Animate heart meshes
            heartMeshes.forEach((heart, i) => {
                heart.position.x += heart.userData.velocity.x;
                heart.position.y += Math.sin(time * heart.userData.floatSpeed + heart.userData.floatOffset) * 0.002;
                heart.rotation.z += heart.userData.rotationSpeed;

                // Wrap around
                if (heart.position.x > 10) heart.position.x = -10;
                if (heart.position.x < -10) heart.position.x = 10;
                if (heart.position.y > 10) heart.position.y = -10;
                if (heart.position.y < -10) heart.position.y = 10;
            });

            // Animate piercings
            piercings.forEach(piercing => {
                piercing.rotation.x += piercing.userData.rotationSpeed.x;
                piercing.rotation.y += piercing.userData.rotationSpeed.y;
                piercing.rotation.z += piercing.userData.rotationSpeed.z;
                
                piercing.position.y += Math.sin(time * piercing.userData.floatSpeed + piercing.userData.floatOffset) * 0.003;
            });

            // Animate ribbons (hair-like)
            ribbons.forEach((ribbon, i) => {
                const wave = Math.sin(time * ribbon.userData.waveSpeed + ribbon.userData.phase) * ribbon.userData.waveAmplitude;
                ribbon.rotation.z = wave;
                ribbon.position.y -= 0.005;

                if (ribbon.position.y < -10) {
                    ribbon.position.y = 10;
                    ribbon.position.x = (Math.random() - 0.5) * 20;
                }
            });

            // Eye follows cursor in eye mode
            if (eyeMode) {
                eyeGroup.rotation.y = mouseX * 0.5;
                eyeGroup.rotation.x = mouseY * 0.3;
            }

            // Smooth camera movement with parallax
            camera.position.x += (targetX - camera.position.x) * 0.05;
            camera.position.y += (targetY - camera.position.y) * 0.05;

            // Apply gyroscope on mobile
            if (gyroData.x !== 0 || gyroData.y !== 0) {
                camera.position.x += (gyroData.x - camera.position.x) * 0.02;
                camera.position.y += (gyroData.y - camera.position.y) * 0.02;
            }

            renderer.render(scene, camera);
        }

        // Handle window resize
        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });

        // Hide loading screen
        setTimeout(() => {
            document.getElementById('loadingScreen').classList.add('hidden');
            animate();
        }, 2000);
    </script>
</body>
</html>
